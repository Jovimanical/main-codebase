require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({1:[function(require,module,exports) {
var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function t(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const a={content:{top:"50%",left:"45%",right:"auto",bottom:"auto",marginRight:"-50%",width:"40%",transform:"translate(-50%, -50%)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:2e3}},n={parent:{marginBottom:20},FormGroup:{marginBottom:10},label:{marginRight:10,marginBottom:10,width:"15%",display:"inline-block"},input:{width:"70%"}},s=ReactModal,r=({label:e,children:t})=>React.createElement("div",{style:n.FormGroup,className:"form-row field-first_name"},React.createElement("div",null,React.createElement("label",{style:n.label},e),t));class l extends React.Component{constructor(...e){var t;return t=super(...e),this.state={modalIsOpen:!1},this.openModal=(()=>{this.setState({modalIsOpen:!0})}),this.afterOpenModal=(()=>{}),this.closeModal=(e=>{e.preventDefault(),this.setState({modalIsOpen:!1})}),t}render(){return React.createElement(React.Fragment,null,this.props.render(this.openModal),React.createElement(s,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,style:a,ariaHideApp:!1,contentLabel:"Example Modal"},this.props.children(this.closeModal)))}}const o=a=>{let{node:n="a",children:s}=a,r=t(a,["node","children"]);return React.createElement(n,e({},r,{className:"button nowrap",style:{cursor:"pointer",padding:"7px",marginRight:"10px"}}),s)};function i(){class a extends React.Component{constructor(...e){var a;return a=super(...e),this.state={banks:[],account_id:"",account_name:"",bank:""},this.refundTutor=(e=>{e.preventDefault(),console.log(this.state);const a=this.state,{banks:n}=a,s=t(a,["banks"]);let r=new Request(this.props.url,{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});fetch(r).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(e=>{console.log(e),window.location.reload()})}),a}componentDidMount(){0==this.props.banks.length?fetch(this.props.url).then(e=>{200===e.status?e.json().then(e=>{const{banks:t,account_id:a="",account_name:n="",bank:s=""}=e;this.setState({banks:t,account_id:a,account_name:n,bank:s}),console.log(e),this.props.updateParent(e)}):console.log("Looks like there was a problem. Status Code: "+e.status)}).catch(function(e){console.log("Fetch Error :-S",e)}):this.setState(this.props)}render(){return React.createElement(React.Fragment,null,React.createElement("fieldset",{className:"module aligned "},React.createElement("h2",{style:n.parent},`Refund ${this.props.kind} fee form.`),[{label:"Account number",key:"account_id",extra:{maxlength:10}},{label:"Account name",key:"account_name",extra:{}}].map(t=>React.createElement(r,{label:`${t.label}:`},React.createElement("input",e({style:n.input,value:this.state[t.key],className:"vTextField"},t.extra,{onChange:e=>this.setState({[t.key]:e.target.value}),type:"text"})))),React.createElement(r,{label:"Bank"},React.createElement("select",{style:n.input,onChange:e=>this.setState({bank:e.target.value}),value:this.state.bank},this.state.banks.map(e=>React.createElement("option",{value:e[0]},e[1]))))),React.createElement("div",{class:"submit-row"},React.createElement("input",{onClick:this.refundTutor,value:this.props.buttonText,class:"default",type:"submit"}),React.createElement("p",{class:"deletelink-box"},React.createElement("a",{href:"#",onClick:this.props.closeModal,class:"deletelink"},"Close Modal"))))}}class s extends React.Component{constructor(...e){var t;return t=super(...e),this.state={value:"",banks:[],account_id:"",account_name:"",bank:"",userId:""},this.updateParent=(({banks:e,account_id:t="",account_name:a="",bank:n=""})=>{this.setState({banks:e,account_id:t,account_name:a,bank:n})}),t}componentDidMount(){this.setState({userId:this.props.userId})}render(){return React.createElement(l,{render:e=>React.createElement(o,{onClick:e},"Refund Client")},t=>React.createElement(a,e({},this.state,{url:`${this.props.baseUrl}${this.state.userId}/`,closeModal:t,kind:this.props.kind,updateParent:this.updateParent,buttonText:this.props.buttonText})))}}Array.from(document.querySelectorAll(".pfee")).forEach(e=>{const t=e.getAttribute("data-user-id"),a=e.getAttribute("data-url"),n=e.getAttribute("data-kind");e.getAttribute("data-button-text");e.parentNode.setAttribute("class","field-refund_button nowrap"),ReactDOM.render(React.createElement(s,{userId:t,kind:n,baseUrl:a}),e.parentNode)})}function c(){class a extends React.Component{constructor(...a){var n;return n=super(...a),this.state={edit:!1,content:this.props.content,fields:{remark:this.props.content,action:""}},this.showEditButton=(()=>{this.setState({edit:!0})}),this.updateFields=((t,a)=>{const{fields:n}=this.state;this.setState({fields:e({},n,{[t]:a})})}),this.hideEditButton=(()=>{this.timeOutId=setTimeout(()=>{this.setState({edit:!1})},1e3)}),this.updateRemark=((e,a)=>{e.preventDefault(),console.log(this.state);const n=this.state,{banks:s}=n;t(n,["banks"]);let r=new Request(`${window.REMARK_URL}${this.props.request_id}/`,{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.fields)});fetch(r).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}).then(t=>{console.log(t),this.setState({content:t.content}),a(e)})}),this.disableSubmit=(()=>{const{fields:e}=this.state;return 2!==Object.keys(e).map(t=>e[t]).filter(e=>e.trim().length>0).length}),this.getDate=(()=>{let e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}),n}render(){return React.createElement(l,{render:e=>React.createElement(React.Fragment,null,React.createElement("p",{onMouseOver:this.showEditButton,onMouseOut:this.hideEditButton},this.state.content),this.state.edit?React.createElement(o,{onClick:e},"Update Remark"):null)},e=>React.createElement(React.Fragment,null,React.createElement("fieldset",{className:"module aligned "},React.createElement("h2",{style:n.parent},"Update Remark"),React.createElement(r,{label:"Action"},React.createElement("select",{style:n.input,onChange:e=>this.updateFields("action",e.target.value),value:this.state.fields.action},React.createElement("option",{value:""},"Select Action"),React.createElement("option",{value:"profile_to_client"},"Send profile to client"),React.createElement("option",{value:"activity_log"},"Log calls/sms/email"),React.createElement("option",{value:"call_client_later"},"Contact client later"),React.createElement("option",{value:"generic"},"Generic action"))),React.createElement(r,{label:"Remark:"},"call_client_later"===this.state.fields.action?React.createElement("input",{type:"date",style:n.input,value:this.state.fields.remark,className:"vTextField",min:this.getDate(),onChange:e=>this.updateFields("remark",e.target.value)}):React.createElement("textarea",{rows:4,style:n.input,value:this.state.fields.remark,className:"vTextField",onChange:e=>this.updateFields("remark",e.target.value)}))),React.createElement("div",{class:"submit-row"},this.disableSubmit()?null:React.createElement("input",{onClick:t=>{this.updateRemark(t,e)},value:"Update Remark",class:"default",type:"submit"}),React.createElement("p",{class:"deletelink-box"},React.createElement("a",{href:"#",onClick:e,class:"deletelink"},"Close Modal")))))}}Array.from(document.querySelectorAll("td.field-remarks")).forEach(e=>{let t=e.textContent,n=$(e).siblings().find("input[name=_selected_action]").val();ReactDOM.render(React.createElement(a,{content:t,request_id:n}),e)})}function u(){i(),c(),console.log($)}u();
},{}]},{},[1])